package bms;

import java.util.Random;

//4
public class BankManager {
	static Bank[][] arUser = new Bank[3][1000];
	static int[] arCnt = {0, 0, 0};
	
	
	
	String join(int bankChoice, String name, String pw) {
		//bankChoice: 1(국민은행)- 5글자, 신한- 6글자, 우리- 7글자
		//계좌 개설 로직
		String account = makeAccount(bankChoice);
		
		//중복회원 확인
		for (int i = 0; i < arCnt[bankChoice - 1]; i++) { //bankChoice - 1: 인덱스 번호
			if(arUser[bankChoice - 1][i].account.equals(account)) {
				//중복회원일 경우 계좌 개설 다시
				account = makeAccount(bankChoice);
				i = -1; //for문을 처음으로 도는 것과 같이 된다. 
			}
		}
		
		//회원 저장(가입)
		switch(bankChoice) {
		case 1: 
			arUser[0][arCnt[0]] = new Kookmin(account, name, pw); //arCnt[0]: 국민은행의 회원수
			arCnt[0]++;
			break;
		case 2: 
			arUser[1][arCnt[1]] = new Kookmin(account, name, pw); //arCnt[1]: 신한은행의 회원수
			arCnt[1]++;
			break;
		case 3: 
			arUser[2][arCnt[2]] = new Kookmin(account, name, pw); //arCnt[2]: 우리은행의 회원수
			arCnt[2]++;
			break;
		}
		return account; //가입된 계좌번호를 리턴으로 알려줌(여기서만 account를 알 수 있으니)
		
	}
	
	String makeAccount(int bankChoice) {
		Random r = new Random();
		String account = null;
		
		//5글자: 10000 ~ 99999
		//0 ~ 89999		10000 ~ 99999
		//3400 ~ 3700	(301)+3400
		if(bankChoice == 1) {
			account = r.nextInt(90000)+10000 + "";
		} else if(bankChoice == 2) {
			account = r.nextInt(900000) + 100000 + "";
		} else if(bankChoice == 3) {
			account = r.nextInt(9000000) + 1000000 + "";
		} 
		return account;
	}

}
